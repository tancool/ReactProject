<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.0.0-beta.3/babel.min.js"></script>
</head>

<body>

    <div id="app">

    </div>
    <!-- <script type="text/babel">

        // 复习Context

        function Father() {
            return < div > helpfulerror</div >
        }
        ReactDOM.render(
            <Father />,
            document.getElementById('app')
        )

    </script> -->
    <script>
        const MyContext = React.createContext();
        const { Provider, Consumer } = MyContext;
        {
            // 一种方式是这样写,不必引入Provider
            /* <MyContext.Provider value={{ username, age }}>
                <B />
            </MyContext.Provider> */
        }

        export default class A extends Component {
            state = { username: 'tst', age: 18 };
            render() {
                const { username, age } = this.state;
                return (
                    <div b='2'>
                        我是A组件
                        <Provider value={{ username, age }}>
                            <B />
                        </Provider>
                    </div>
                )
            }
        }
        class B extends Component {
            render() {
                return (
                    <div b='3'>
                        2
                        <C />
                    </div>
                )
            }
        }

        class C extends Component {
            // static contextType = MyContext; // 这个像是写固定的
            render() {
                // console.log(this.context); // 此刻已经成功拿到了值
                return (
                    <Consumer>
                        {value => {
                            console.log(value);
                            return <span>{value.username}-{value.age}</span>
                        }}
                    </Consumer>
                )
            }
        }

// function C() {
//     return (
//         <div>
//             <p>我是C~</p>
//             <Consumer> // 函数式和类式组件都可以使用这种方式组件使用的这种方式
//                 {value => {
//                     console.log(value);
//                     return <span>{value.username}-{value.age}</span>
//                 }}
//             </Consumer>
//         </div>
//     )
// }
    </script>
</body>

</html>